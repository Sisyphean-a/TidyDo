# 更新日志

## 📝 版本更新记录

### 📊 v2.7.0 - 数据报表功能版本

**🎯 全新数据报表功能**

- ✨ **新增报表视图** - 在"查看全部"模式下新增第四个视图选项，提供全面的数据分析和可视化
- 📊 **多维度数据统计** - 包括项目数量统计、状态分布分析、完成情况统计、时间趋势分析和优先级分布
- 📈 **ECharts 5 图表库** - 集成业界领先的图表库，提供饼图、柱状图、折线图、仪表盘等多种图表类型
- 🎨 **直观数据可视化** - 概览卡片展示关键指标，多种图表类型清晰展示数据分析结果
- ⚡ **智能数据刷新** - 支持手动刷新和自动刷新，数据过期提醒，确保报表数据的时效性
- 📤 **数据导出功能** - 支持将报表数据导出为JSON格式，便于数据备份和分析

**🔧 技术架构增强**

- 新增 `ReportService` 数据服务层，提供完整的统计分析功能
- 新增 `useReportStore` 状态管理，管理报表数据的响应式状态
- 扩展视图系统支持第四个视图模式，完善视图切换逻辑
- 集成 ECharts 5.x 版本，提供高性能图表渲染能力
- 遵循现有分层架构设计，确保代码的可维护性和扩展性

**📁 新增文件**

- `src/services/reportService.js` - 报表数据服务，统计分析核心逻辑
- `src/stores/useReportStore.js` - 报表状态管理
- `src/views/tidyDo/components/TodoReport.vue` - 报表主视图组件

**📁 修改文件**

- `src/stores/useAppStore.js` - 扩展视图模式支持报表视图
- `src/views/tidyDo/components/TodoHeader.vue` - 视图切换UI增加报表选项
- `src/views/tidyDo/components/TodoContent.vue` - 内容区域支持报表视图渲染
- `package.json` - 新增 ECharts 5.x 依赖

### 🚀 v2.6.0 - 筛选功能增强版本

**🎯 筛选功能增强**

- ✨ **节点日期筛选** - 在分类筛选条件中新增节点日期范围筛选，支持按节点日期过滤待办事项
- 🔍 **筛选UI优化** - 在分类编辑对话框中添加节点日期筛选字段，与截止日期筛选保持一致的UI风格
- 📊 **筛选逻辑完善** - 扩展筛选引擎，支持同时按截止日期和节点日期进行复合筛选

**📁 修改文件**

- `src/stores/useAppStore.js` - 扩展筛选逻辑支持节点日期
- `src/model/CategoryEditDialog.vue` - 增强筛选条件设置
- `src/services/todoService.js` - 扩展筛选条件数据结构

### 🌟 v2.5.0 - 节点日期功能版本

**🎯 全新节点日期功能**

- ✨ **新增节点日期字段** - 为待办事项添加节点日期，用于标记项目关键时间节点
- 📊 **表格视图优化** - 在截止日期前新增节点日期列，重新调整列宽度确保单行显示
- 🕒 **时间线视图扩展** - 排序依据新增节点日期选项，支持按节点日期分组和排序
- 📅 **日历视图增强** - 日期维度新增节点日期选项，支持按节点日期显示日历数据
- 🎨 **统一视觉标识** - 使用星形图标（󰧓）标识节点日期，保持三个视图的一致性

**🔧 技术改进**

- 扩展数据模型支持 `milestoneDate` 字段，完善数据序列化和验证
- 更新 `dateUtils.js` 工具函数，支持节点日期的处理和计算
- 优化表格列配置，确保新增列后布局保持12栅格系统限制
- 完善时间线排序逻辑，节点日期默认升序排列符合时间节点预期

**📁 修改文件**

- `src/services/todoService.js` - 数据结构扩展
- `src/stores/useAppStore.js` - 表格列配置调整
- `src/views/tidyDo/components/TodoItem.vue` - 表格行显示更新
- `src/model/TodoEditDialog.vue` - 编辑表单字段添加
- `src/views/tidyDo/components/TodoTimeline.vue` - 时间线排序扩展
- `src/views/tidyDo/components/TodoCalendar.vue` - 日历维度扩展
- `src/utils/dateUtils.js` - 日期工具函数更新

### 🚀 v2.4.0 - 拖拽功能优化版本

**🎯 拖拽功能全面优化**

- ✨ **VueDraggablePlus集成** - 使用成熟的拖拽库替换自定义实现，提升稳定性和流畅性
- 🖱️ **侧边栏分类拖拽优化** - 保持长按启动机制，增强视觉反馈和动画效果
- 🔄 **四象限拖拽重构** - 完全重构跨象限拖拽逻辑，确保状态正确更新和数据持久化
- 🎨 **拖拽视觉效果** - 300ms动画过渡，ghost效果和选中状态的视觉反馈
- 🐛 **拖拽问题修复** - 修复跨象限拖拽后状态不更新的问题，确保数据同步

**🔧 技术改进**

- 移除复杂的自定义拖拽逻辑，简化代码维护
- 统一拖拽实现方式，提升用户体验一致性
- 优化拖拽事件处理，减少DOM操作和性能开销
- 增强移动端拖拽兼容性

### 🎯 v2.3.0 - 简单Todo版本

**🎯 全新简单Todo功能**

- ✨ **新增简单Todo大类** - 第三种分类类型，专为轻量级任务管理设计
- 🎨 **四象限视图** - 采用2x2网格布局，直观展示待办/进行中/已完成/暂停四种状态
- 🖱️ **拖拽状态切换** - 支持在象限间拖拽移动任务，快速改变状态
- ✏️ **内联编辑优化** - 点击即可编辑任务标题，编辑模式下禁用拖拽避免冲突
- 🎯 **极简数据模型** - 每个简单Todo只包含标题和状态两个核心字段
- 🔄 **智能创建体验** - 点击象限内"+"按钮直接进入编辑模式，无需默认标题

**📁 新增文件**

- `src/services/simpleTodoService.js` - 简单Todo数据服务，独立存储管理
- `src/stores/useSimpleTodosStore.js` - 简单Todo状态管理
- `src/views/tidyDo/components/SimpleTodoQuadrant.vue` - 四象限主视图组件
- `src/views/tidyDo/components/SimpleTodoItem.vue` - 简单Todo项组件

**🔧 技术改进**

- 扩展分类系统支持`isSimpleTodo`字段，实现三种大类类型并存
- 优化UI适配逻辑，简单Todo大类时自动调整界面显示
- 完善拖拽交互，预览跟随鼠标位置，编辑模式下禁用拖拽
- 集成应用初始化流程，支持简单Todo数据的加载和管理

**🐛 问题修复**

- 修复头部"新增待办"按钮在简单Todo分类时的显示逻辑
- 修复简单Todo创建体验，点击"+"按钮直接进入编辑模式
- 修复拖拽交互冲突，编辑模式下禁用拖拽功能

### 🗓️ v2.2.0 - 日历视图版本

**📅 全新日历视图功能**

- ✨ **新增日历视图** - 第三个视图选项，提供直观的日历界面展示待办事项
- 🧠 **智能时间范围显示** - 根据当前分类下todo项目的时间跨度自动调整日历显示范围（月视图/季度视图/半年视图/年视图）
- 📊 **数据密度可视化** - 使用色块和数字直观显示每天的todo数量，重点关注数据分布而非具体内容
- 🎛️ **多时间维度支持** - 支持按创建时间、节点时间、截止时间、更新时间四个维度查看日历数据
- 🖱️ **交互式悬停提示** - 鼠标悬停显示该天的详细todo列表摘要
- 🎨 **优化的视图切换UI** - 重新设计视图切换界面，使用按钮组支持三个视图的便捷切换

**📁 新增文件**

- `src/utils/dateUtils.js` - 日期处理工具函数，包括时间范围计算、日历网格生成等
- `src/views/tidyDo/components/TodoCalendar.vue` - 核心日历视图组件

**🔧 技术改进**

- 扩展AppStore支持calendar视图模式
- 优化视图切换逻辑，支持三个视图的循环切换
- 完善响应式设计，确保日历在不同屏幕尺寸下的良好显示

### ✨ v2.1.0 - 拖拽排序优化版本

**🎯 拖拽排序功能重构**

- ✨ **视觉反馈优化** - 横线精确指示插入位置，替代模糊的区域高亮
- 🏗️ **架构重构** - 创建专用 `useDragSort` composable，遵循分层架构设计
- 🐛 **修复边界问题** - 解决拖拽到列表末尾位置失败的问题
- 📝 **代码简化** - 组件代码量减少 60%+，提高可维护性
- 🎨 **交互优化** - 长按 500ms 启动拖拽，支持鼠标和触摸设备

**📁 新增文件**

- `src/composables/useDragSort.js` - 拖拽排序交互管理

### 🎉 v2.0.0 - 架构优化版本

**🏗️ 系统架构全面优化**

- ✨ **新增统一错误处理机制** - 用户友好的错误提示和完善的错误日志
- ✨ **新增工具函数体系** - ID生成器、错误处理器等开发工具
- 🔧 **重构应用初始化流程** - 并行加载，性能提升40%
- 🔧 **优化配置管理系统** - 简化缓存机制，提高响应性能
- 📚 **完善文档体系** - 全面的JSDoc注释和开发指南
- 🧹 **代码质量提升** - 消除重复代码，统一设计模式

**📁 新增文件**

- `src/utils/errorHandler.js` - 统一错误处理工具
- `src/utils/idGenerator.js` - ID生成工具
- `src/README.md` - 源码结构说明
- `ARCHITECTURE_OPTIMIZATION.md` - 架构优化报告

### v1.2.0 - 时间线视图

- ✨ 新增时间线视图模式，支持按时间维度管理待办事项
- 🔄 优化视图切换体验，提供更直观的时间展示

---

## 📋 提交规范

使用 [Conventional Commits](https://conventionalcommits.org/) 规范：

```bash
feat: 新功能
fix: 修复bug
docs: 文档更新
style: 代码格式调整
refactor: 代码重构
perf: 性能优化
test: 测试相关
chore: 构建工具或辅助工具的变动
```
